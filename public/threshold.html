<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AirAware+ | Sensitivity Levels</title>
  <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
    crossorigin="anonymous"
  />

  <link rel="stylesheet" href="/threshold/threshold.css">

  <style>
    :root { --aa-primary: #185f85; }

    /* Navbar */
    .navbar .nav-link { color: var(--aa-primary); font-weight: 600; }
    .navbar .nav-link:hover, .navbar .nav-link:focus { color: #134e6d; }
    .navbar .nav-link.active { color: var(--aa-primary); font-weight: 700; }
    .navbar .welcome-text { color: #111; font-weight: 300; }

    /* Brand outline button (profile icon) */
    .btn-outline-aa{
      border-color: var(--aa-primary);
      color: var(--aa-primary);
      background: transparent;
    }

    .btn-outline-aa:hover,
    .btn-outline-aa:focus{
      background-color: var(--aa-primary);
      border-color: var(--aa-primary);
      color: #fff;              /* makes the SVG turn white because it uses currentColor */
    }

    /* Page layout so footer sits at the bottom */
    body { background: #f1f6fa; }
    main { flex: 1; }

    /* Hero banner with centred title */
    .page-hero {
      position: relative;
      min-height: 220px;
      background-image: url("/assets/web-bg.jpg");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }
    .page-hero::before{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(
        135deg,
        rgba(24, 95, 133, 0.55) 0%,
        rgba(24, 95, 133, 0.25) 40%,
        rgba(0, 0, 0, 0.25) 100%
      );
    }
    .page-hero .hero-inner{
      position: relative;
      z-index: 1;
      min-height: 220px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 1.5rem;
    }
    .page-hero h1{
      color: #fff;
      font-weight: 700;
      letter-spacing: 0.2px;
      margin: 0;
      text-shadow: 0 12px 28px rgba(0,0,0,0.35);
    }
    .page-hero p{
      color: rgba(255,255,255,0.92);
      max-width: 720px;
      margin: .75rem auto 0;
    }

    /* Form container */
    .panel {
      background: rgba(255,255,255,0.88);
      border: 1px solid rgba(15,23,42,0.08);
      border-radius: 16px;
      box-shadow: 0 12px 24px rgba(15,23,42,0.06);
      backdrop-filter: blur(8px);
    }

    /* Radio option cards */
    .option-input { position: absolute; opacity: 0; pointer-events: none; }
    .option-card {
      border: 1px solid rgba(15,23,42,0.12);
      border-radius: 14px;
      background: #fff;
      padding: 1rem;
      height: 100%;
      cursor: pointer;
      transition: transform .12s ease, border-color .12s ease, box-shadow .12s ease;
    }
    .option-card:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 18px rgba(15,23,42,0.06);
      border-color: rgba(24, 95, 133, 0.35);
    }
    .option-title { font-weight: 700; margin-bottom: .25rem; }
    .option-desc { color: rgba(15,23,42,0.65); margin: 0; }

    /* Checked state */
    .option-input:checked + .option-card{
      border-color: rgba(24, 95, 133, 0.9);
      box-shadow: 0 0 0 4px rgba(24, 95, 133, 0.12);
    }

    /* Make “I don’t know” visually distinct */
    .option-card-unknown {
      background: var(--aa-primary);
      border-color: rgba(24, 95, 133, 0.9);
    }

    .option-card-unknown .option-title,
    .option-card-unknown .option-desc {
      color: #fff;
    }

    .option-card-unknown .option-desc {
      opacity: 0.92;
    }

    /* Ensure checked state still reads well */
    .option-input:checked + .option-card-unknown {
      box-shadow: 0 0 0 4px rgba(24, 95, 133, 0.22);
    }

    /* CTA button matches brand */
    .btn-aa {
      background-color: var(--aa-primary);
      border-color: var(--aa-primary);
      color: #fff;
    }
    .btn-aa:hover, .btn-aa:focus {
      background-color: #134e6d;
      border-color: #134e6d;
      color: #fff;
    }

    /* Footer links */
    .footer-link {
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      font-weight: 500;
      color: #185f85;
      text-decoration: none;
      background-color: rgba(24, 95, 133, 0.08);
      transition: background-color 0.15s ease, color 0.15s ease;
    }
    .footer-link:hover, .footer-link:focus {
      background-color: rgba(24, 95, 133, 0.15);
      color: #134e6d;
      text-decoration: none;
    }

    @media (max-width: 767.98px){
      .page-hero, .page-hero .hero-inner { min-height: 180px; }
    }

    /* Quiz panel (hidden by default) */
.quiz-panel {
  display: none;
  background: rgba(255,255,255,0.75);
  border: 1px solid rgba(15,23,42,0.08);
  border-radius: 16px;
  padding: 1rem;
}

.quiz-panel.is-open {
  display: block;
  animation: quizFadeIn 0.16s ease-out;
}

@keyframes quizFadeIn {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

.quiz-choice {
  display: flex;
  gap: 0.6rem;
  align-items: flex-start;
  padding: 0.75rem 0.85rem;
  background: #fff;
  border: 1px solid rgba(15,23,42,0.10);
  border-radius: 12px;
  cursor: pointer;
}

.quiz-choice:hover {
  border-color: rgba(24, 95, 133, 0.35);
  box-shadow: 0 10px 18px rgba(15,23,42,0.05);
}

.quiz-choice input[type="radio"] {
  margin-top: 0.2rem;
}

.quiz-result {
  border: 1px solid rgba(24, 95, 133, 0.20);
  border-radius: 14px;
  padding: 1rem;
  background: rgba(24, 95, 133, 0.06);
}

  </style>
</head>

<body class="d-flex flex-column min-vh-100">

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg bg-white border-bottom sticky-top">
      <div class="container-fluid px-3 px-lg-4">
        <a class="navbar-brand" href="/" aria-label="AirAware+ Home">
          <img src="/assets/airaware-logo-no-whitespace.png" alt="AirAware+" height="50" />
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#airawareNavbar" aria-controls="airawareNavbar" aria-expanded="false">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="airawareNavbar">
          <!-- Nav links pushed to the right -->
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0 gap-lg-3">
            <li class="nav-item">
              <a class="nav-link active" href="/">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/dashboard">Dashboard</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/threshold">Sensitivity</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/location">Location</a>
            </li>
          </ul>
          <!-- Right-side user area -->
          <div class="d-flex align-items-center gap-3 ms-lg-4">
            <span class="welcome-text"> Welcome, <span id="welcomeUserName">User</span></span>
            <a class="btn btn-outline-aa btn-sm d-flex align-items-center justify-content-center" href="/user" aria-label="Profile" style="width:38px;height:38px;border-radius:50%;">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
                <path d="M14 14s-1-4-6-4-6 4-6 4 1 1 6 1 6-1 6-1Z" />
              </svg>
            </a>
          </div>
        </div>
      </div>
    </nav>

  <!-- HERO -->
  <header class="page-hero">
    <div class="hero-inner">
      <div>
        <h1 class="display-6">Sensitivity Levels</h1>
        <p class="mb-0">
          Choose when you’d like to be alerted. We’ll notify you when the overall <strong>AQI</strong> reaches or exceeds your selected level.
        </p>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="container py-4 py-lg-5">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-9 col-xl-8">
      <div class="panel p-3 p-md-4 p-lg-4">
        <form class="sensitivity-form" action="#" method="post">
          <div class="mb-3">
            <div class="text-uppercase small text-body-secondary mb-2">Set your alert threshold</div>
            <p class="mb-0 text-body-secondary">
              This setting controls when you receive alerts based on the <strong class="text-body">overall Air Quality Index (AQI)</strong>.
              It does not set thresholds for individual pollutants.
            </p>
            <p class="small text-body-secondary mt-2 mb-0">
               Not sure what to choose? Select <strong>I don’t know</strong> and we’ll help you figure it out.
              </p>

          </div>

          <!-- Stacked options -->
          <div class="d-grid gap-3 mt-3">

            <label class="d-block position-relative">
              <input class="option-input" type="radio" name="sensitivity" value="very-sensitive" required>
              <div class="option-card">
                <div class="option-title">Very sensitive</div>
                <p class="option-desc mb-0">Alert me early, even for smaller changes in air quality.</p>
              </div>
            </label>

            <label class="d-block position-relative">
              <input class="option-input" type="radio" name="sensitivity" value="sensitive">
              <div class="option-card">
                <div class="option-title">Sensitive</div>
                <p class="option-desc mb-0">Alert me sooner than average.</p>
              </div>
            </label>

            <label class="d-block position-relative">
              <input class="option-input" type="radio" name="sensitivity" value="moderate">
              <div class="option-card">
                <div class="option-title">Moderately sensitive</div>
                <p class="option-desc mb-0">Balanced alerts based on overall air quality.</p>
              </div>
            </label>

            <label class="d-block position-relative">
              <input class="option-input" type="radio" name="sensitivity" value="slight">
              <div class="option-card">
                <div class="option-title">Slightly sensitive</div>
                <p class="option-desc mb-0">Alert me occasionally, mostly when air quality noticeably worsens.</p>
              </div>
            </label>

            <label class="d-block position-relative">
              <input class="option-input" type="radio" name="sensitivity" value="not-sensitive">
              <div class="option-card">
                <div class="option-title">Not sensitive</div>
                <p class="option-desc mb-0">Only alert me when air quality is poor or worse.</p>
              </div>
            </label>

            <!-- Distinct “I don’t know” -->
            <label class="d-block position-relative">
              <input class="option-input" type="radio" name="sensitivity" value="unknown">
              <div class="option-card option-card-unknown">
                <div class="option-title">I don’t know</div>
                <p class="option-desc mb-0">
                  We’ll set this to <strong>Moderately sensitive</strong> by default. You can update this at any time.
                </p>
                <button type="button" class="btn btn-light btn-sm rounded-pill" id="openQuizBtn">
                   Help me figure it out</button>
              </div>
            </label>

          </div>

          <!-- QUIZ (hidden by default; shown when user chooses "I don't know") -->
<section id="quizSection" class="quiz-panel mt-4" aria-hidden="true">
  <div class="quiz-header d-flex flex-column flex-md-row gap-2 align-items-md-center justify-content-between">
    <div>
      <div class="text-uppercase small text-body-secondary mb-1">Quick sensitivity check</div>
      <div class="fw-semibold">Answer these to get a recommended alert level</div>
      <div class="small text-body-secondary">
        This is for personalisation only and does not provide medical advice.
      </div>
    </div>

    <button type="button" class="btn btn-outline-secondary btn-sm rounded-pill align-self-start align-self-md-center" id="closeQuizBtn">
      Hide questions
    </button>
  </div>

  <hr class="my-3">

  <!-- Q1 -->
  <div class="mb-3">
    <div class="fw-semibold mb-2">1. When air quality is poor (traffic, smoke, haze), what usually happens?</div>
    <div class="d-grid gap-2">
      <label class="quiz-choice">
        <input type="radio" name="q_symptoms" value="0">
        <span>No noticeable symptoms</span>
      </label>
      <label class="quiz-choice">
        <input type="radio" name="q_symptoms" value="1">
        <span>Mild irritation (slight cough / dry throat / watery eyes)</span>
      </label>
      <label class="quiz-choice">
        <input type="radio" name="q_symptoms" value="2">
        <span>Breathing discomfort (tight chest / wheeze / shortness of breath)</span>
      </label>
      <label class="quiz-choice">
        <input type="radio" name="q_symptoms" value="3">
        <span>I need medication or rest</span>
      </label>
    </div>
  </div>

  <!-- Q2 -->
  <div class="mb-3">
    <div class="fw-semibold mb-2">2. How often do changes in air quality affect you?</div>
    <div class="d-grid gap-2">
      <label class="quiz-choice">
        <input type="radio" name="q_frequency" value="0">
        <span>Almost never</span>
      </label>
      <label class="quiz-choice">
        <input type="radio" name="q_frequency" value="1">
        <span>Occasionally (a few times a month)</span>
      </label>
      <label class="quiz-choice">
        <input type="radio" name="q_frequency" value="2">
        <span>Often (weekly or more)</span>
      </label>
      <label class="quiz-choice">
        <input type="radio" name="q_frequency" value="3">
        <span>Very often (most days when pollution is noticeable)</span>
      </label>
    </div>
  </div>

  <!-- Q3 -->
  <div class="mb-3">
    <div class="fw-semibold mb-2">3. On poor-air days, how does it affect your activities?</div>
    <div class="d-grid gap-2">
      <label class="quiz-choice">
        <input type="radio" name="q_impact" value="0">
        <span>No effect</span>
      </label>
      <label class="quiz-choice">
        <input type="radio" name="q_impact" value="1">
        <span>Slight discomfort but I continue</span>
      </label>
      <label class="quiz-choice">
        <input type="radio" name="q_impact" value="2">
        <span>I reduce outdoor activity/exercise</span>
      </label>
      <label class="quiz-choice">
        <input type="radio" name="q_impact" value="3">
        <span>I avoid going outside if possible</span>
      </label>
    </div>
  </div>

  <!-- Actions -->
  <div class="d-flex flex-column flex-md-row gap-2 justify-content-center mt-3">
    <button type="button" class="btn btn-aa px-4 py-2 rounded-pill" id="calcBtn">
      Get recommendation
    </button>

    <button type="button" class="btn btn-outline-secondary px-4 py-2 rounded-pill" id="backToChoicesBtn">
      Back to sensitivity choices
    </button>
  </div>

  <!-- Result panel -->
  <div id="quizResult" class="quiz-result mt-4" hidden>
    <div class="fw-semibold mb-1">Recommendation</div>
    <div class="small text-body-secondary mb-3" id="resultExplain"></div>

    <div class="d-flex flex-column flex-md-row gap-2">
      <button type="button" class="btn btn-aa rounded-pill" id="useRecommendedBtn">
        Use recommended
      </button>

      <button type="button" class="btn btn-outline-secondary rounded-pill" id="useAverageNormalBtn">
        Use average (normal)
      </button>

      <button type="button" class="btn btn-outline-secondary rounded-pill" id="useAverageAsthmaBtn">
        Use average (asthma)
      </button>
    </div>
  </div>
</section>


          <p class="small text-body-secondary mt-3 mb-4">
            You can change this setting at any time.
          </p>

          <div class="d-flex justify-content-center">
            <button type="submit" class="btn btn-aa px-4 py-2 rounded-pill">
              Continue
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</main>


  <!-- FOOTER -->
  <footer class="border-top mt-auto" style="background: rgba(255, 255, 255, 0.7);">
    <div class="container py-3">
      <div class="row gy-2 align-items-center small text-body-secondary">

        <div class="col-12 col-lg">
          AirAware+ provides environmental awareness only and does not offer medical advice.
        </div>

        <div class="col-12 col-lg-auto d-flex gap-2">
          <a href="/privacy" class="footer-link">Privacy</a>
          <a href="/terms" class="footer-link">Terms</a>
          <a href="/accessibility" class="footer-link">Accessibility</a>
        </div>

        <div class="col-12 col-lg-auto ms-lg-auto">
          © 2026 AirAware+
        </div>
      </div>
    </div>
  </footer>

  <!-- Bootstrap JS bundle (required for mobile navbar toggle) -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
    crossorigin="anonymous"
  ></script>

  <script src="/threshold/threshold.js"></script>
</body>
</html>
